<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Frontend App</title>
     <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
</head>
<body>

    <nav class="green">
      <div class="nav-wrapper">
        <a href="#!" class="brand-logo center">Frontend App</a>
      </div>
    </nav>

    <div id="content">
        <h1>This view is rendered entierly on the client!</h1>
        <h2>It can be statically served</h2>
    </div>
    <script src="server.js"></script>

    <script>
      async function sendRequest(url, method, data){
                try{
                    //retrieve token from localStorage
                    let token = window.localStorage.getItem('access_token');

                    let options = {//options passed to fetch function
                        method: method,
                        headers: { 
                        'Content-Type' : 'application/json',
                        'Authorization' : `JWT ${token}`//send token in request
                        }
                    };

                    if(data)//data will be given for PUT & POST requests
                    options.body = JSON.stringify(data);//convert data to JSON string

                    let response = await fetch(url, options);
                
                    let result = await response.json();//Get json data from response
                    return result;//return the result

                }catch(error){
                    return error;//catch and log any errors
                }
            }
      async function getListing(){
          try{
            let response = await fetch(`${server}/posts`);
            let result = await response.json();
            displayListing(result);
          }
          catch(e){
            console.log(e);
          }
        }

        function displayListing(pokeList){
          //Renders a list of pokemon links to the page 
          let result = document.querySelector("#listing");
          let results = pokeList.results;
          for(let listEl of results){
            // let name = capitalizeFirstLetter(listEl.name)
           result.innerHTML += `<li><a id = '${listEl.name}' class = 'collection-item' href="#" onclick = getPokemon("${listEl.name}")>${listEl.name}</a></li>`;
          } 
        }

    </script>
  

    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
</body>
</html>